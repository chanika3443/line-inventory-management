<style>
  @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');
  
  * {
    box-sizing: border-box;
    margin: 0;
    padding: 0;
  }
  
  :root {
    /* Colors */
    --bg-primary: #ffffff;
    --bg-secondary: #f5f5f7;
    --bg-tertiary: #e8e8ed;
    --bg-elevated: #ffffff;
    --text-primary: #1d1d1f;
    --text-secondary: #6e6e73;
    --text-tertiary: #aeaeb2;
    --accent: #007aff;
    --accent-light: rgba(0,122,255,0.1);
    --success: #30d158;
    --success-light: rgba(48,209,88,0.1);
    --warning: #ff9f0a;
    --warning-light: rgba(255,159,10,0.1);
    --danger: #ff453a;
    --danger-light: rgba(255,69,58,0.1);
    --border: rgba(0,0,0,0.06);
    --border-strong: rgba(0,0,0,0.12);
    
    /* Typography - Font Family */
    --font-display: 'SF Pro Display', 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
    --font-text: 'SF Pro Text', 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
    
    /* Typography Scale */
    --text-xs: 11px;
    --text-sm: 13px;
    --text-base: 15px;
    --text-md: 17px;
    --text-lg: 20px;
    --text-xl: 24px;
    --text-2xl: 28px;
    --text-3xl: 34px;
    
    /* Font Weights */
    --font-regular: 400;
    --font-medium: 500;
    --font-semibold: 600;
    --font-bold: 700;
    
    /* Spacing System */
    --space-1: 4px;
    --space-2: 8px;
    --space-3: 12px;
    --space-4: 16px;
    --space-5: 20px;
    --space-6: 24px;
    --space-8: 32px;
    --space-10: 40px;
    --space-12: 48px;
    --space-16: 64px;
    
    /* Shadows */
    --shadow-xs: 0 1px 2px rgba(0,0,0,0.04);
    --shadow-sm: 0 2px 8px rgba(0,0,0,0.04), 0 1px 2px rgba(0,0,0,0.06);
    --shadow-md: 0 4px 16px rgba(0,0,0,0.08), 0 2px 4px rgba(0,0,0,0.04);
    --shadow-lg: 0 8px 32px rgba(0,0,0,0.12), 0 4px 8px rgba(0,0,0,0.04);
    --shadow-xl: 0 16px 48px rgba(0,0,0,0.16), 0 8px 16px rgba(0,0,0,0.08);
    
    /* Border Radius */
    --radius-xs: 6px;
    --radius-sm: 10px;
    --radius-md: 14px;
    --radius-lg: 20px;
    --radius-xl: 28px;
    --radius-full: 9999px;
    
    /* Transitions */
    --transition-fast: 0.15s cubic-bezier(0.4, 0, 0.2, 1);
    --transition-normal: 0.25s cubic-bezier(0.4, 0, 0.2, 1);
    --transition-slow: 0.35s cubic-bezier(0.4, 0, 0.2, 1);
    
    /* Animation Timing Functions */
    --ease-out: cubic-bezier(0.4, 0, 0.2, 1);
    --ease-spring: cubic-bezier(0.32, 0.72, 0, 1);
    --ease-bounce: cubic-bezier(0.68, -0.55, 0.265, 1.55);
    
    /* Animation Durations */
    --duration-fast: 0.15s;
    --duration-normal: 0.25s;
    --duration-slow: 0.35s;
    
    /* Icon Sizes */
    --icon-sm: 16px;
    --icon-md: 20px;
    --icon-lg: 24px;
    --icon-xl: 32px;
    
    /* Glass Morphism */
    --glass-bg: rgba(255, 255, 255, 0.72);
    --glass-bg-light: rgba(255, 255, 255, 0.85);
    --glass-bg-heavy: rgba(255, 255, 255, 0.95);
    --glass-blur: blur(20px);
    --glass-saturate: saturate(180%);
    --glass-border: rgba(255, 255, 255, 0.18);
    --glass-shadow: 0 4px 24px rgba(0, 0, 0, 0.06);
    --glass-inner-glow: inset 0 1px 0 rgba(255, 255, 255, 0.5);
    
    /* Gradient System */
    --gradient-primary: linear-gradient(135deg, #007AFF 0%, #5856D6 100%);
    --gradient-success: linear-gradient(135deg, #30D158 0%, #34C759 100%);
    --gradient-warning: linear-gradient(135deg, #FF9F0A 0%, #FF6B00 100%);
    --gradient-danger: linear-gradient(135deg, #FF453A 0%, #FF3B30 100%);
    --gradient-mesh: linear-gradient(135deg, #667eea 0%, #764ba2 50%, #f093fb 100%);
    --gradient-card-overlay: linear-gradient(180deg, rgba(255,255,255,0.8) 0%, transparent 100%);
  }
  
  /* Glass Morphism Utility Class */
  .glass {
    background: var(--glass-bg);
    backdrop-filter: var(--glass-saturate) var(--glass-blur);
    -webkit-backdrop-filter: var(--glass-saturate) var(--glass-blur);
    border: 1px solid var(--glass-border);
    box-shadow: var(--glass-shadow), var(--glass-inner-glow);
  }
  
  .glass-light {
    background: var(--glass-bg-light);
    backdrop-filter: var(--glass-saturate) var(--glass-blur);
    -webkit-backdrop-filter: var(--glass-saturate) var(--glass-blur);
    border: 1px solid var(--glass-border);
    box-shadow: var(--glass-shadow), var(--glass-inner-glow);
  }
  
  .glass-heavy {
    background: var(--glass-bg-heavy);
    backdrop-filter: var(--glass-saturate) var(--glass-blur);
    -webkit-backdrop-filter: var(--glass-saturate) var(--glass-blur);
    border: 1px solid var(--glass-border);
    box-shadow: var(--glass-shadow), var(--glass-inner-glow);
  }
  
  body {
    font-family: var(--font-text);
    background: linear-gradient(180deg, #f5f5f7 0%, #ffffff 100%);
    min-height: 100vh;
    color: var(--text-primary);
    line-height: 1.5;
    font-size: var(--text-base);
    font-weight: var(--font-regular);
    letter-spacing: -0.01em;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    font-feature-settings: 'cv11' 1;
  }
  
  /* ========================================
     SMOOTH TRANSITIONS & ANIMATIONS
     ======================================== */
  
  /* Fade In Animation */
  @keyframes fadeIn {
    from {
      opacity: 0;
      transform: translateY(10px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }
  
  @keyframes fadeOut {
    from {
      opacity: 1;
      transform: translateY(0);
    }
    to {
      opacity: 0;
      transform: translateY(-10px);
    }
  }
  
  /* Slide In Animation */
  @keyframes slideInRight {
    from {
      opacity: 0;
      transform: translateX(20px);
    }
    to {
      opacity: 1;
      transform: translateX(0);
    }
  }
  
  @keyframes slideInLeft {
    from {
      opacity: 0;
      transform: translateX(-20px);
    }
    to {
      opacity: 1;
      transform: translateX(0);
    }
  }
  
  /* Scale Animation */
  @keyframes scaleIn {
    from {
      opacity: 0;
      transform: scale(0.95);
    }
    to {
      opacity: 1;
      transform: scale(1);
    }
  }
  
  /* Spinner Animation */
  @keyframes spin {
    to {
      transform: rotate(360deg);
    }
  }
  
  /* Pulse Animation */
  @keyframes pulse {
    0%, 100% {
      opacity: 1;
    }
    50% {
      opacity: 0.5;
    }
  }
  
  /* Shimmer Animation for Skeleton */
  @keyframes shimmer {
    0% {
      background-position: -200% 0;
    }
    100% {
      background-position: 200% 0;
    }
  }
  
  /* Apply fade-in to all major elements */
  .container > * {
    animation: fadeIn var(--duration-normal) var(--ease-out);
  }
  
  /* Stagger animation for list items */
  .list-item {
    animation: fadeIn var(--duration-normal) var(--ease-out);
    animation-fill-mode: both;
  }
  
  .list-item:nth-child(1) { animation-delay: 0.05s; }
  .list-item:nth-child(2) { animation-delay: 0.1s; }
  .list-item:nth-child(3) { animation-delay: 0.15s; }
  .list-item:nth-child(4) { animation-delay: 0.2s; }
  .list-item:nth-child(5) { animation-delay: 0.25s; }
  
  /* ========================================
     LOADING SPINNER
     ======================================== */
  
  .loading-overlay {
    position: fixed;
    inset: 0;
    background: rgba(255, 255, 255, 0.9);
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 9999;
    opacity: 0;
    pointer-events: none;
    transition: opacity var(--duration-normal) var(--ease-out);
  }
  
  .loading-overlay.active {
    opacity: 1;
    pointer-events: all;
  }
  
  .spinner {
    width: 40px;
    height: 40px;
    border: 3px solid var(--border);
    border-top-color: var(--accent);
    border-radius: 50%;
    animation: spin 0.8s linear infinite;
  }
  
  .spinner-small {
    width: 20px;
    height: 20px;
    border-width: 2px;
  }
  
  /* Loading Text */
  .loading-text {
    margin-top: var(--space-3);
    font-size: var(--text-sm);
    color: var(--text-secondary);
    text-align: center;
  }
  
  /* ========================================
     PROGRESS BAR
     ======================================== */
  
  .progress-bar {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    height: 3px;
    background: var(--border);
    z-index: 10000;
    opacity: 0;
    transition: opacity var(--duration-fast) var(--ease-out);
  }
  
  .progress-bar.active {
    opacity: 1;
  }
  
  .progress-bar-fill {
    height: 100%;
    background: var(--gradient-primary);
    width: 0%;
    transition: width 0.3s var(--ease-out);
  }
  
  /* ========================================
     SKELETON LOADING
     ======================================== */
  
  .skeleton {
    background: linear-gradient(
      90deg,
      var(--bg-secondary) 0%,
      var(--bg-tertiary) 50%,
      var(--bg-secondary) 100%
    );
    background-size: 200% 100%;
    animation: shimmer 1.5s infinite;
    border-radius: var(--radius-sm);
  }
  
  .skeleton-text {
    height: 16px;
    margin-bottom: var(--space-2);
  }
  
  .skeleton-text-sm {
    height: 12px;
    width: 60%;
  }
  
  .skeleton-title {
    height: 24px;
    width: 40%;
    margin-bottom: var(--space-3);
  }
  
  .skeleton-card {
    height: 120px;
    margin-bottom: var(--space-4);
  }
  
  .skeleton-circle {
    width: 40px;
    height: 40px;
    border-radius: 50%;
  }
  
  /* Heading Styles */
  h1, h2, h3, h4, h5, h6 {
    font-family: var(--font-display);
    line-height: 1.2;
    letter-spacing: -0.02em;
  }
  
  h1 {
    font-size: var(--text-3xl);
    font-weight: var(--font-bold);
    letter-spacing: -0.03em;
  }
  
  h2 {
    font-size: var(--text-2xl);
    font-weight: var(--font-bold);
    letter-spacing: -0.02em;
  }
  
  h3 {
    font-size: var(--text-xl);
    font-weight: var(--font-semibold);
    letter-spacing: -0.02em;
  }
  
  h4 {
    font-size: var(--text-lg);
    font-weight: var(--font-semibold);
    letter-spacing: -0.02em;
  }
  
  h5 {
    font-size: var(--text-md);
    font-weight: var(--font-medium);
    letter-spacing: -0.02em;
  }
  
  h6 {
    font-size: var(--text-base);
    font-weight: var(--font-medium);
    letter-spacing: -0.02em;
  }
  
  /* Global SVG Icon Styles */
  svg {
    stroke-width: 1.5;
    stroke-linecap: round;
    stroke-linejoin: round;
  }
</style>

<style>
  .container {
    max-width: 500px;
    margin: 0 auto;
    padding: 16px 20px 120px;
  }
  
  /* Premium Header - Compact for mobile with shrink on scroll */
  .header {
    padding: var(--space-4) var(--space-5) var(--space-3); /* 16px top, 20px sides, 12px bottom */
    text-align: center;
    position: sticky;
    top: 0;
    z-index: 100;
    background: var(--glass-bg-heavy);
    backdrop-filter: var(--glass-saturate) var(--glass-blur);
    -webkit-backdrop-filter: var(--glass-saturate) var(--glass-blur);
    border-bottom: 1px solid var(--border);
    box-shadow: var(--glass-inner-glow);
    transition: padding 0.25s var(--ease-out);
  }
  
  .header.header-compact {
    padding: var(--space-2) var(--space-5) var(--space-2); /* 8px top/bottom when scrolled */
  }
  
  .header h1 {
    font-size: var(--text-xl);
    font-weight: var(--font-bold);
    letter-spacing: -0.02em;
    color: var(--text-primary);
    line-height: 1.2;
    transition: font-size 0.25s var(--ease-out);
  }
  
  .header.header-compact h1 {
    font-size: var(--text-md); /* 17px when scrolled */
  }
  
  .header-subtitle {
    font-size: var(--text-sm);
    color: var(--text-secondary);
    margin-top: 2px;
    font-weight: var(--font-regular);
    letter-spacing: -0.01em;
    line-height: 1.4;
    transition: all 0.25s var(--ease-out);
    max-height: 20px;
    opacity: 1;
    overflow: hidden;
  }
  
  .header.header-compact .header-subtitle {
    max-height: 0;
    opacity: 0;
    margin-top: 0;
  }
  
  /* Premium Cards */
  .card {
    background: var(--bg-elevated);
    border-radius: var(--radius-lg);
    padding: var(--space-6); /* 24px minimum padding */
    margin-bottom: 16px;
    box-shadow: var(--shadow-sm);
    border: 1px solid var(--border);
    transition: all 0.3s var(--ease-out);
    position: relative;
    overflow: hidden;
  }
  
  .card::before {
    content: '';
    position: absolute;
    inset: 0;
    background: var(--gradient-card-overlay);
    pointer-events: none;
    opacity: 0.5;
  }
  
  .card:hover {
    transform: translateY(-4px);
    box-shadow: var(--shadow-md);
  }
  
  .card > * {
    position: relative;
  }
  
  .card-title {
    font-size: 12px;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.08em;
    color: var(--text-tertiary);
    margin-bottom: 16px;
  }
  
  /* Premium Form Elements */
  .form-group {
    margin-bottom: var(--space-5); /* 20px minimum gap */
  }
  
  .form-group label {
    display: block;
    font-size: 13px;
    font-weight: 600;
    color: var(--text-secondary);
    margin-bottom: 8px;
    letter-spacing: -0.01em;
  }
  
  .form-group input,
  .form-group select,
  .form-group textarea {
    width: 100%;
    padding: 14px 16px;
    border: 1.5px solid var(--border-strong);
    border-radius: var(--radius-md);
    font-size: var(--text-md);
    font-family: inherit;
    background: var(--bg-primary);
    color: var(--text-primary);
    transition: border-color 0.2s var(--ease-out), box-shadow 0.2s var(--ease-out), background 0.2s var(--ease-out);
    letter-spacing: -0.01em;
    -webkit-appearance: none;
    appearance: none;
  }
  
  .form-group input:hover,
  .form-group select:hover {
    border-color: var(--text-tertiary);
  }
  
  .form-group input:focus,
  .form-group select:focus,
  .form-group textarea:focus {
    outline: none;
    border-color: var(--accent);
    background: var(--bg-primary);
    box-shadow: 0 0 0 4px var(--accent-light);
  }
  
  .form-group input::placeholder {
    color: var(--text-tertiary);
  }
  
  .form-group select {
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 24 24' fill='none' stroke='%236e6e73' stroke-width='2'%3E%3Cpolyline points='6 9 12 15 18 9'/%3E%3C/svg%3E");
    background-repeat: no-repeat;
    background-position: right 14px center;
    padding-right: 44px;
  }
</style>

<style>
  /* Premium Buttons */
  .btn {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    padding: 14px 24px;
    border: none;
    border-radius: var(--radius-full);
    font-size: 15px;
    font-weight: 600;
    font-family: inherit;
    cursor: pointer;
    transition: all var(--duration-fast) var(--ease-spring);
    text-decoration: none;
    gap: 8px;
    letter-spacing: -0.01em;
    position: relative;
    overflow: hidden;
  }
  
  .btn::before {
    content: '';
    position: absolute;
    inset: 0;
    background: linear-gradient(180deg, rgba(255,255,255,0.2) 0%, transparent 50%);
    opacity: 0;
    transition: opacity var(--duration-fast) var(--ease-out);
  }
  
  .btn:hover::before {
    opacity: 1;
  }
  
  .btn:active {
    transform: scale(0.97);
    transition: transform var(--duration-fast) var(--ease-spring);
  }
  
  .btn-primary {
    background: linear-gradient(180deg, #0a84ff 0%, #007aff 100%);
    color: white;
    box-shadow: 0 2px 8px rgba(0,122,255,0.3), inset 0 1px 0 rgba(255,255,255,0.2);
  }
  
  .btn-primary:hover {
    transform: translateY(-1px);
    box-shadow: 0 4px 16px rgba(0,122,255,0.4), inset 0 1px 0 rgba(255,255,255,0.2);
  }
  
  .btn-primary:active {
    transform: scale(0.97);
    box-shadow: 0 1px 4px rgba(0,122,255,0.3);
  }
  
  .btn-secondary {
    background: var(--bg-tertiary);
    color: var(--text-primary);
  }
  
  .btn-secondary:hover {
    background: #d8d8dc;
  }
  
  .btn-danger {
    background: linear-gradient(180deg, #ff5e57 0%, #ff453a 100%);
    color: white;
    box-shadow: 0 2px 8px rgba(255,69,58,0.3);
  }
  
  .btn-danger:hover {
    transform: translateY(-1px);
    box-shadow: 0 4px 16px rgba(255,69,58,0.4);
  }
  
  .btn-danger:active {
    transform: scale(0.97);
    box-shadow: 0 1px 4px rgba(255,69,58,0.3);
  }
  
  .btn-outline {
    background: transparent;
    color: var(--text-primary);
    border: 1.5px solid var(--border-strong);
  }
  
  .btn-outline:hover {
    background: var(--bg-secondary);
    border-color: var(--text-tertiary);
  }
  
  .btn-block {
    display: flex;
    width: 100%;
  }
  
  .btn:disabled {
    opacity: 0.4;
    cursor: not-allowed;
    transform: none !important;
    box-shadow: none !important;
  }
  
  .btn-sm {
    padding: 10px 16px;
    font-size: 13px;
    border-radius: var(--radius-sm);
  }
  
  .btn svg {
    width: 18px;
    height: 18px;
    flex-shrink: 0;
  }
  
  .btn-sm svg {
    width: 16px;
    height: 16px;
  }
  
  /* Navigation Icon Styles */
  .nav svg,
  nav svg,
  .navigation svg {
    width: var(--icon-lg);
    height: var(--icon-lg);
  }
</style>

<style>
  /* Premium Stats Grid */
  .stats-grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: var(--space-5); /* 20px minimum gap */
  }
  
  .stat-card {
    background: var(--bg-elevated);
    border-radius: var(--radius-lg);
    padding: var(--space-6); /* 24px minimum padding */
    text-align: center;
    box-shadow: var(--shadow-sm);
    border: 1px solid var(--border);
    text-decoration: none;
    transition: all 0.3s var(--ease-out);
    position: relative;
    overflow: hidden;
  }
  
  .stat-card::before {
    content: '';
    position: absolute;
    inset: 0;
    background: linear-gradient(180deg, rgba(255,255,255,0.8) 0%, transparent 100%);
    pointer-events: none;
  }
  
  .stat-card:hover {
    transform: translateY(-4px);
    box-shadow: var(--shadow-md);
  }
  
  .stat-card:active {
    transform: translateY(0);
  }
  
  .stat-card svg {
    stroke-width: 1.5;
    margin-bottom: 12px;
    position: relative;
  }
  
  .stat-value {
    font-size: 36px;
    font-weight: 700;
    color: var(--text-primary);
    letter-spacing: -0.03em;
    line-height: 1;
    position: relative;
  }
  
  .stat-label {
    font-size: 13px;
    color: var(--text-secondary);
    margin-top: 6px;
    font-weight: 500;
    letter-spacing: -0.01em;
    position: relative;
  }
  
  /* Premium List Items */
  .list-item {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 18px 0; /* 18px vertical padding */
    border-bottom: 1px solid var(--border);
    transition: background var(--transition-fast);
  }
  
  .list-item:last-child {
    border-bottom: none;
  }
  
  .list-item-title {
    font-size: 16px;
    font-weight: 600;
    color: var(--text-primary);
    letter-spacing: -0.01em;
  }
  
  .list-item-subtitle {
    font-size: 13px;
    color: var(--text-secondary);
    margin-top: 3px;
    letter-spacing: -0.01em;
  }
  
  /* Premium Badges */
  .badge {
    display: inline-flex;
    align-items: center;
    padding: 5px 12px;
    border-radius: var(--radius-full);
    font-size: 12px;
    font-weight: 600;
    letter-spacing: -0.01em;
  }
  
  .badge-success {
    background: var(--success-light);
    color: #248a3d;
  }
  
  .badge-warning {
    background: var(--warning-light);
    color: #b25000;
  }
  
  .badge-danger {
    background: var(--danger-light);
    color: #d70015;
  }
  
  /* Premium Alerts */
  .alert {
    padding: 14px 16px;
    border-radius: var(--radius-md);
    font-size: 14px;
    font-weight: 500;
    margin-bottom: 16px;
    display: flex;
    align-items: center;
    gap: 10px;
  }
  
  .alert-success {
    background: var(--success-light);
    color: #248a3d;
  }
  
  .alert-error {
    background: var(--danger-light);
    color: #d70015;
  }
  
  .alert-warning {
    background: var(--warning-light);
    color: #b25000;
  }
</style>

<style>
  /* Premium Modal */
  .modal-overlay {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(0,0,0,0.6);
    backdrop-filter: blur(16px);
    -webkit-backdrop-filter: blur(16px);
    display: flex;
    align-items: flex-end;
    justify-content: center;
    z-index: 1000;
    padding: 0;
    opacity: 1;
    transition: opacity 0.4s var(--ease-spring);
  }
  
  .modal-content {
    background: var(--bg-elevated);
    border-radius: var(--radius-xl) var(--radius-xl) 0 0;
    width: 100%;
    max-width: 100%;
    max-height: 92vh;
    overflow-y: auto;
    animation: modalSlideUp 0.4s var(--ease-spring);
    box-shadow: var(--shadow-xl);
  }
  
  @keyframes modalSlideUp {
    from {
      opacity: 0;
      transform: translateY(100%);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }
  
  .modal-header {
    padding: 28px 24px 20px;
    text-align: center;
    position: sticky;
    top: 0;
    background: var(--bg-elevated);
    z-index: 1;
    border-bottom: 1px solid var(--border);
  }
  
  .modal-icon {
    width: 64px;
    height: 64px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    margin: 0 auto 16px;
    position: relative;
  }
  
  .modal-icon::before {
    content: '';
    position: absolute;
    inset: 0;
    border-radius: 50%;
    background: linear-gradient(180deg, rgba(255,255,255,0.8) 0%, transparent 100%);
  }
  
  .modal-icon svg {
    width: 32px;
    height: 32px;
    stroke-width: 1.5;
    position: relative;
  }
  
  .modal-title {
    font-size: 22px;
    font-weight: 700;
    color: var(--text-primary);
    letter-spacing: -0.02em;
  }
  
  .modal-body {
    padding: 20px 24px 24px;
  }
  
  .modal-footer {
    display: flex;
    padding: 16px 24px;
    gap: 12px;
    border-top: 1px solid var(--border);
    position: sticky;
    bottom: 0;
    background: var(--bg-elevated);
    padding-bottom: calc(16px + env(safe-area-inset-bottom));
  }
  
  .modal-footer .btn {
    flex: 1;
  }
  
  /* Premium Preview Items */
  .preview-item {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 18px 0; /* 18px vertical padding */
    border-bottom: 1px solid var(--border);
  }
  
  .preview-item:last-child {
    border-bottom: none;
  }
  
  .preview-label {
    font-size: 14px;
    color: var(--text-secondary);
    font-weight: 500;
  }
  
  .preview-value {
    font-size: 15px;
    font-weight: 600;
    color: var(--text-primary);
    letter-spacing: -0.01em;
  }
  
  .preview-value.highlight-red {
    color: var(--danger);
  }
  
  .preview-value.highlight-green {
    color: var(--success);
  }
  
  .preview-summary {
    background: linear-gradient(135deg, var(--bg-secondary) 0%, var(--bg-tertiary) 100%);
    border-radius: var(--radius-md);
    padding: var(--space-5); /* 20px minimum */
    margin-top: var(--space-5); /* 20px minimum gap */
    text-align: center;
  }
  
  .preview-summary-label {
    font-size: 11px;
    color: var(--text-tertiary);
    text-transform: uppercase;
    letter-spacing: 0.1em;
    font-weight: 600;
  }
  
  .preview-summary-value {
    font-size: 32px;
    font-weight: 700;
    margin-top: 6px;
    letter-spacing: -0.03em;
  }
</style>

<style>
  /* Premium Search Box */
  .search-box {
    position: relative;
    margin-bottom: 16px;
  }
  
  .search-box input {
    width: 100%;
    padding: 14px 16px 14px 48px;
    border: 1.5px solid var(--border-strong);
    border-radius: var(--radius-full);
    font-size: 15px;
    background: var(--bg-elevated);
    font-family: inherit;
    transition: border-color 0.2s var(--ease-out), box-shadow 0.2s var(--ease-out);
    letter-spacing: -0.01em;
  }
  
  .search-box input:hover {
    border-color: var(--text-tertiary);
  }
  
  .search-box input:focus {
    outline: none;
    border-color: var(--accent);
    box-shadow: 0 0 0 4px var(--accent-light);
  }
  
  .search-box::before {
    content: "";
    position: absolute;
    left: 18px;
    top: 50%;
    transform: translateY(-50%);
    width: 18px;
    height: 18px;
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 24 24' stroke='%236e6e73' stroke-width='2'%3E%3Cpath stroke-linecap='round' stroke-linejoin='round' d='M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z'/%3E%3C/svg%3E");
    background-size: contain;
    opacity: 0.7;
  }
  
  /* Premium Table */
  .table-container {
    overflow-x: auto;
    margin: 0 -20px;
    padding: 0 20px;
  }
  
  table {
    width: 100%;
    border-collapse: collapse;
    font-size: 14px;
  }
  
  th, td {
    padding: 14px 10px;
    text-align: left;
  }
  
  th {
    font-size: 11px;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.08em;
    color: var(--text-tertiary);
    border-bottom: 1px solid var(--border-strong);
  }
  
  td {
    border-bottom: 1px solid var(--border);
    color: var(--text-primary);
  }
  
  tr:last-child td {
    border-bottom: none;
  }
  
  tr:hover td {
    background: var(--bg-secondary);
  }
</style>

<style>
  /* Premium Loading */
  .loading {
    text-align: center;
    padding: 56px 20px;
    color: var(--text-secondary);
  }
  
  .spinner {
    width: 36px;
    height: 36px;
    border: 3px solid var(--bg-tertiary);
    border-top-color: var(--accent);
    border-radius: 50%;
    animation: spin 0.8s linear infinite;
    margin: 0 auto 16px;
  }
  
  @keyframes spin {
    to { transform: rotate(360deg); }
  }
  
  /* Skeleton Loading System */
  @keyframes shimmer {
    0% {
      background-position: 200% 0;
    }
    100% {
      background-position: -200% 0;
    }
  }
  
  .skeleton {
    background: linear-gradient(
      90deg,
      var(--bg-tertiary) 0%,
      var(--bg-secondary) 50%,
      var(--bg-tertiary) 100%
    );
    background-size: 200% 100%;
    animation: shimmer 1.5s infinite;
    border-radius: inherit;
  }
  
  /* Skeleton Component Variants */
  .skeleton-text {
    height: 1em;
    border-radius: var(--radius-xs);
    background: linear-gradient(
      90deg,
      var(--bg-tertiary) 0%,
      var(--bg-secondary) 50%,
      var(--bg-tertiary) 100%
    );
    background-size: 200% 100%;
    animation: shimmer 1.5s infinite;
  }
  
  .skeleton-text.skeleton-text-sm {
    height: 0.75em;
  }
  
  .skeleton-text.skeleton-text-lg {
    height: 1.5em;
  }
  
  .skeleton-circle {
    border-radius: var(--radius-full);
    background: linear-gradient(
      90deg,
      var(--bg-tertiary) 0%,
      var(--bg-secondary) 50%,
      var(--bg-tertiary) 100%
    );
    background-size: 200% 100%;
    animation: shimmer 1.5s infinite;
  }
  
  .skeleton-card {
    border-radius: var(--radius-lg);
    background: linear-gradient(
      90deg,
      var(--bg-tertiary) 0%,
      var(--bg-secondary) 50%,
      var(--bg-tertiary) 100%
    );
    background-size: 200% 100%;
    animation: shimmer 1.5s infinite;
    padding: var(--space-6); /* 24px minimum padding */
  }
  
  /* Skeleton List Item Template */
  .skeleton-list-item {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 18px 0; /* 18px vertical padding */
    border-bottom: 1px solid var(--border);
  }
  
  .skeleton-list-item:last-child {
    border-bottom: none;
  }
  
  .skeleton-list-item-content {
    flex: 1;
  }
  
  .skeleton-list-item-title {
    height: 16px;
    width: 60%;
    border-radius: var(--radius-xs);
    background: linear-gradient(
      90deg,
      var(--bg-tertiary) 0%,
      var(--bg-secondary) 50%,
      var(--bg-tertiary) 100%
    );
    background-size: 200% 100%;
    animation: shimmer 1.5s infinite;
  }
  
  .skeleton-list-item-subtitle {
    height: 13px;
    width: 40%;
    margin-top: 6px;
    border-radius: var(--radius-xs);
    background: linear-gradient(
      90deg,
      var(--bg-tertiary) 0%,
      var(--bg-secondary) 50%,
      var(--bg-tertiary) 100%
    );
    background-size: 200% 100%;
    animation: shimmer 1.5s infinite;
  }
  
  .skeleton-list-item-badge {
    width: 60px;
    height: 24px;
    border-radius: var(--radius-full);
    background: linear-gradient(
      90deg,
      var(--bg-tertiary) 0%,
      var(--bg-secondary) 50%,
      var(--bg-tertiary) 100%
    );
    background-size: 200% 100%;
    animation: shimmer 1.5s infinite;
  }
  
  /* Skeleton Stat Template */
  .skeleton-stat {
    text-align: center;
    padding: var(--space-6); /* 24px minimum padding */
  }
  
  .skeleton-stat-value {
    height: 36px;
    width: 80px;
    margin: 0 auto;
    border-radius: var(--radius-xs);
    background: linear-gradient(
      90deg,
      var(--bg-tertiary) 0%,
      var(--bg-secondary) 50%,
      var(--bg-tertiary) 100%
    );
    background-size: 200% 100%;
    animation: shimmer 1.5s infinite;
  }
  
  .skeleton-stat-label {
    height: 13px;
    width: 60px;
    margin: 8px auto 0;
    border-radius: var(--radius-xs);
    background: linear-gradient(
      90deg,
      var(--bg-tertiary) 0%,
      var(--bg-secondary) 50%,
      var(--bg-tertiary) 100%
    );
    background-size: 200% 100%;
    animation: shimmer 1.5s infinite;
  }
  
  /* Fade-in Animation for Appearing Elements */
  @keyframes fadeIn {
    from {
      opacity: 0;
      transform: translateY(8px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }
  
  .fade-in {
    animation: fadeIn 0.3s var(--ease-out) forwards;
  }
  
  .fade-in-delay-1 {
    animation: fadeIn 0.3s var(--ease-out) 0.05s forwards;
    opacity: 0;
  }
  
  .fade-in-delay-2 {
    animation: fadeIn 0.3s var(--ease-out) 0.1s forwards;
    opacity: 0;
  }
  
  .fade-in-delay-3 {
    animation: fadeIn 0.3s var(--ease-out) 0.15s forwards;
    opacity: 0;
  }
  
  .loading p {
    font-size: 14px;
    font-weight: 500;
  }
  
  /* Utilities */
  .hidden { display: none !important; }
  .text-center { text-align: center; }
  .text-right { text-align: right; }
  .mt-2 { margin-top: 8px; }
  .mt-4 { margin-top: 16px; }
  .mb-2 { margin-bottom: 8px; }
  .mb-4 { margin-bottom: 16px; }
  
  /* ========================================
     Visual Feedback System
     ======================================== */
  
  /* Success Check Animation - stroke-dashoffset animation for checkmark */
  @keyframes success-check {
    0% {
      stroke-dashoffset: 24;
    }
    100% {
      stroke-dashoffset: 0;
    }
  }
  
  .success-check-icon {
    stroke-dasharray: 24;
    stroke-dashoffset: 24;
    animation: success-check 0.4s var(--ease-out) forwards;
  }
  
  .success-animation {
    animation: success-check 0.4s var(--ease-out) forwards;
  }
  
  /* Error Shake Animation */
  @keyframes shake {
    0%, 100% {
      transform: translateX(0);
    }
    10%, 30%, 50%, 70%, 90% {
      transform: translateX(-8px);
    }
    20%, 40%, 60%, 80% {
      transform: translateX(8px);
    }
  }
  
  .shake {
    animation: shake 0.5s var(--ease-out);
  }
  
  .error-shake {
    animation: shake 0.5s var(--ease-out);
  }
  
  /* Pulse Animation for Error States */
  @keyframes pulse {
    0%, 100% {
      opacity: 1;
    }
    50% {
      opacity: 0.6;
    }
  }
  
  .pulse {
    animation: pulse 1.5s var(--ease-out) infinite;
  }
  
  /* Button Loading State */
  .btn-loading {
    position: relative;
    color: transparent !important;
    pointer-events: none;
  }
  
  .btn-loading::after {
    content: '';
    position: absolute;
    width: 18px;
    height: 18px;
    top: 50%;
    left: 50%;
    margin-left: -9px;
    margin-top: -9px;
    border: 2px solid rgba(255, 255, 255, 0.3);
    border-top-color: white;
    border-radius: 50%;
    animation: spin 0.8s linear infinite;
  }
  
  .btn-secondary.btn-loading::after,
  .btn-outline.btn-loading::after {
    border-color: rgba(0, 0, 0, 0.15);
    border-top-color: var(--text-primary);
  }
  
  /* Color Transitions for State Changes */
  .btn,
  .card,
  .stat-card,
  .list-item,
  .badge,
  .alert,
  .form-group input,
  .form-group select,
  .form-group textarea,
  .search-box input {
    transition: 
      background-color var(--duration-fast) var(--ease-out),
      border-color var(--duration-fast) var(--ease-out),
      color var(--duration-fast) var(--ease-out),
      box-shadow var(--duration-fast) var(--ease-out),
      transform var(--duration-fast) var(--ease-spring);
  }
  
  /* Ensure links have color transitions */
  a {
    transition: color var(--duration-fast) var(--ease-out);
  }
  
  /* Interactive state color transitions */
  .interactive {
    transition: 
      background-color var(--duration-fast) var(--ease-out),
      border-color var(--duration-fast) var(--ease-out),
      color var(--duration-fast) var(--ease-out),
      opacity var(--duration-fast) var(--ease-out);
  }

  /* Premium Field Validation */
  .form-group.has-error input,
  .form-group.has-error select {
    border-color: var(--danger);
    background: var(--danger-light);
    animation: pulse 1.5s var(--ease-out) infinite;
  }
  
  .form-group.has-error input:focus,
  .form-group.has-error select:focus {
    box-shadow: 0 0 0 4px var(--danger-light);
  }
  
  .field-error {
    color: var(--danger);
    font-size: 12px;
    font-weight: 500;
    margin-top: 8px;
    display: none;
  }
  
  .form-group.has-error .field-error {
    display: block;
  }
  
  /* Premium Empty State */
  .empty-state {
    text-align: center;
    padding: 56px 24px;
  }
  
  .empty-state svg {
    opacity: 0.3;
    margin-bottom: 16px;
  }
  
  .empty-state-text {
    color: var(--text-secondary);
    font-size: 15px;
    font-weight: 500;
  }
  
  /* Action Buttons Group */
  .action-buttons {
    display: flex;
    gap: 8px;
    margin-top: 10px;
  }
  
  .action-buttons .btn {
    padding: 8px 14px;
    font-size: 13px;
    border-radius: var(--radius-sm);
  }
  
  /* Divider */
  .divider {
    height: 1px;
    background: var(--border);
    margin: 24px 0;
  }
  
  /* Bottom Tab Bar */
  .bottom-nav {
    position: fixed;
    bottom: 0;
    left: 0;
    right: 0;
    background: var(--glass-bg-heavy);
    backdrop-filter: var(--glass-saturate) var(--glass-blur);
    -webkit-backdrop-filter: var(--glass-saturate) var(--glass-blur);
    border-top: 1px solid var(--border);
    display: flex;
    justify-content: space-around;
    align-items: center;
    padding: 8px 0;
    padding-bottom: calc(8px + env(safe-area-inset-bottom));
    z-index: 100;
  }
  
  .nav-item {
    display: flex;
    flex-direction: column;
    align-items: center;
    text-decoration: none;
    color: var(--text-tertiary);
    padding: 4px 12px;
    border-radius: var(--radius-sm);
    transition: all 0.2s var(--ease-out);
    min-width: 64px;
    cursor: pointer;
    -webkit-tap-highlight-color: transparent;
    user-select: none;
    position: relative;
  }
  
  .nav-item:active {
    transform: scale(0.95);
    opacity: 0.7;
  }
  
  .nav-item svg {
    width: 24px;
    height: 24px;
    stroke-width: 1.5;
    margin-bottom: 2px;
    transition: transform 0.2s var(--ease-out);
  }
  
  .nav-item.active svg {
    transform: translateY(-2px);
  }
  
  .nav-item span {
    font-size: 10px;
    font-weight: 500;
    letter-spacing: -0.01em;
  }
  
  .nav-item.active {
    color: var(--accent);
  }
  
  .nav-item:not(.active):hover {
    color: var(--text-secondary);
  }
</style>

<script>
  // Navigation helper - smart navigation for LIFF and regular URLs
  function navigateTo(url, event) {
    // Prevent default if event is passed
    if (event) {
      event.preventDefault();
      event.stopPropagation();
    }
    
    // Show loading indicator
    if (typeof LoadingUI !== 'undefined') {
      LoadingUI.show('กำลังโหลด...');
    }
    
    // Extract hash from LIFF URL
    var hash = '';
    if (url.indexOf('#') !== -1) {
      hash = url.substring(url.indexOf('#'));
    }
    
    // Check if we're in iframe
    if (window.self !== window.top) {
      // We're in iframe - change parent's hash using allowed-top-navigation
      try {
        // Build the full parent URL with new hash
        var parentUrl = 'https://chanika3443.github.io/line-inventory-management/' + hash;
        window.top.location.href = parentUrl;
      } catch (e) {
        // If that fails, just navigate within iframe
        console.log('Fallback navigation:', e);
        window.location.href = url;
      }
    } else {
      // Not in iframe, navigate normally
      window.location.href = url;
    }
  }
  
  // Initialize navbar click handlers on DOM ready
  document.addEventListener('DOMContentLoaded', function() {
    // Find all nav-item elements
    var navItems = document.querySelectorAll('.nav-item, .bottom-nav a, .bottom-nav div[onclick]');
    
    navItems.forEach(function(item) {
      // Disable click on active items
      if (item.classList.contains('active')) {
        item.style.pointerEvents = 'none';
        item.style.opacity = '0.5';
      }
      
      // If it's an <a> tag, prevent default and use navigateTo
      if (item.tagName === 'A') {
        item.addEventListener('click', function(e) {
          // Don't navigate if this is the active page
          if (this.classList.contains('active')) {
            e.preventDefault();
            return;
          }
          
          e.preventDefault();
          var url = this.getAttribute('href');
          if (url) {
            navigateTo(url, e);
          }
        });
      } else {
        // For div with onclick, wrap the original onclick
        var originalOnclick = item.getAttribute('onclick');
        if (originalOnclick) {
          item.removeAttribute('onclick');
          item.addEventListener('click', function(e) {
            // Don't navigate if this is the active page
            if (this.classList.contains('active')) {
              e.preventDefault();
              return;
            }
            
            // Execute original onclick
            eval(originalOnclick);
          });
        }
      }
      
      // Add visual feedback on touch/click (only for non-active items)
      item.addEventListener('touchstart', function() {
        if (!this.classList.contains('active')) {
          this.style.opacity = '0.6';
        }
      });
      
      item.addEventListener('touchend', function() {
        if (!this.classList.contains('active')) {
          this.style.opacity = '1';
        }
      });
      
      item.addEventListener('mousedown', function() {
        if (!this.classList.contains('active')) {
          this.style.opacity = '0.6';
        }
      });
      
      item.addEventListener('mouseup', function() {
        if (!this.classList.contains('active')) {
          this.style.opacity = '1';
        }
      });
    });
  });
</script>

<script>
  // Header shrink on scroll - wait for DOM ready
  document.addEventListener('DOMContentLoaded', function() {
    var header = document.querySelector('.header');
    if (!header) return;
    
    var scrollThreshold = 30;
    var ticking = false;
    
    function updateHeader() {
      if (window.scrollY > scrollThreshold) {
        header.classList.add('header-compact');
      } else {
        header.classList.remove('header-compact');
      }
      ticking = false;
    }
    
    window.addEventListener('scroll', function() {
      if (!ticking) {
        window.requestAnimationFrame(updateHeader);
        ticking = true;
      }
    }, { passive: true });
    
    // Initial check
    updateHeader();
  });
</script>


<script>
  // ========================================
  // LocalStorage Utility for User Name
  // ========================================
  
  var UserStorage = (function() {
    var STORAGE_KEY = 'inventory_user_name';
    
    /**
     * Save user name to localStorage
     * @param {string} userName - User name to save
     */
    function saveUserName(userName) {
      if (userName && userName.trim() !== '') {
        try {
          localStorage.setItem(STORAGE_KEY, userName.trim());
          console.log('User name saved:', userName);
        } catch (e) {
          console.error('Failed to save user name:', e);
        }
      }
    }
    
    /**
     * Get saved user name from localStorage
     * @returns {string|null} Saved user name or null
     */
    function getUserName() {
      try {
        return localStorage.getItem(STORAGE_KEY);
      } catch (e) {
        console.error('Failed to get user name:', e);
        return null;
      }
    }
    
    /**
     * Auto-fill user name input field
     * @param {string} inputId - ID of the input field
     */
    function autoFillUserName(inputId) {
      var savedName = getUserName();
      if (savedName) {
        var input = document.getElementById(inputId);
        if (input && !input.value) {
          input.value = savedName;
          console.log('Auto-filled user name:', savedName);
        }
      }
    }
    
    /**
     * Setup auto-save on input change
     * @param {string} inputId - ID of the input field
     */
    function setupAutoSave(inputId) {
      var input = document.getElementById(inputId);
      if (input) {
        input.addEventListener('blur', function() {
          if (this.value && this.value.trim() !== '') {
            saveUserName(this.value);
          }
        });
      }
    }
    
    /**
     * Clear saved user name
     */
    function clearUserName() {
      try {
        localStorage.removeItem(STORAGE_KEY);
        console.log('User name cleared');
      } catch (e) {
        console.error('Failed to clear user name:', e);
      }
    }
    
    // Public API
    return {
      save: saveUserName,
      get: getUserName,
      autoFill: autoFillUserName,
      setupAutoSave: setupAutoSave,
      clear: clearUserName
    };
  })();
</script>

<script>
  // ========================================
  // Cache System - Stale-While-Revalidate
  // ========================================
  
  var CacheService = (function() {
    var CACHE_PREFIX = 'inv_cache_';
    
    /**
     * Save data to cache
     * @param {string} key - Cache key
     * @param {any} data - Data to cache
     */
    function set(key, data) {
      try {
        localStorage.setItem(CACHE_PREFIX + key, JSON.stringify(data));
      } catch (e) {
        console.error('Cache set error:', e);
      }
    }
    
    /**
     * Get data from cache
     * @param {string} key - Cache key
     * @returns {any|null} Cached data or null
     */
    function get(key) {
      try {
        var cached = localStorage.getItem(CACHE_PREFIX + key);
        if (!cached) return null;
        return JSON.parse(cached);
      } catch (e) {
        console.error('Cache get error:', e);
        return null;
      }
    }
    
    /**
     * Clear specific cache
     * @param {string} key - Cache key
     */
    function clear(key) {
      try {
        localStorage.removeItem(CACHE_PREFIX + key);
      } catch (e) {
        console.error('Cache clear error:', e);
      }
    }
    
    /**
     * Clear all cache
     */
    function clearAll() {
      try {
        Object.keys(localStorage).forEach(function(key) {
          if (key.startsWith(CACHE_PREFIX)) {
            localStorage.removeItem(key);
          }
        });
      } catch (e) {
        console.error('Cache clearAll error:', e);
      }
    }
    
    /**
     * Fetch with cache - Stale-While-Revalidate pattern
     * @param {string} url - URL to fetch
     * @param {string} cacheKey - Cache key
     * @param {function} onData - Callback when data is available (may be called twice)
     * @param {function} onError - Error callback
     */
    function fetchWithCache(url, cacheKey, onData, onError) {
      // 1. Try to get cached data first
      var cachedData = get(cacheKey);
      if (cachedData) {
        onData(cachedData, true); // true = from cache
      }
      
      // 2. Always fetch fresh data
      fetch(url)
        .then(function(res) { return res.json(); })
        .then(function(freshData) {
          set(cacheKey, freshData);
          onData(freshData, false); // false = from server
        })
        .catch(function(err) {
          if (!cachedData && onError) {
            onError(err);
          }
        });
    }
    
    // Public API
    return {
      set: set,
      get: get,
      clear: clear,
      clearAll: clearAll,
      fetchWithCache: fetchWithCache
    };
  })();
</script>

<script>
  // ========================================
  // Auto Refresh System - Background Update
  // ========================================
  
  var AutoRefresh = (function() {
    var intervalId = null;
    var REFRESH_INTERVAL = 30000; // 30 seconds
    var callbacks = [];
    
    /**
     * Register a callback to be called on refresh
     * @param {function} callback - Function to call
     */
    function onRefresh(callback) {
      if (typeof callback === 'function') {
        callbacks.push(callback);
      }
    }
    
    /**
     * Start auto refresh
     */
    function start() {
      if (intervalId) return;
      
      intervalId = setInterval(function() {
        // Only refresh if page is visible
        if (!document.hidden) {
          callbacks.forEach(function(cb) {
            try { cb(); } catch(e) { console.error('AutoRefresh error:', e); }
          });
        }
      }, REFRESH_INTERVAL);
      
      // Also refresh when page becomes visible
      document.addEventListener('visibilitychange', function() {
        if (!document.hidden && callbacks.length > 0) {
          callbacks.forEach(function(cb) {
            try { cb(); } catch(e) { console.error('AutoRefresh error:', e); }
          });
        }
      });
    }
    
    /**
     * Stop auto refresh
     */
    function stop() {
      if (intervalId) {
        clearInterval(intervalId);
        intervalId = null;
      }
    }
    
    /**
     * Trigger refresh manually
     */
    function refresh() {
      callbacks.forEach(function(cb) {
        try { cb(); } catch(e) { console.error('AutoRefresh error:', e); }
      });
    }
    
    // Public API
    return {
      onRefresh: onRefresh,
      start: start,
      stop: stop,
      refresh: refresh
    };
  })();
</script>


<script>
  // ========================================
  // LOADING & PROGRESS UTILITIES
  // ========================================
  
  var LoadingUI = (function() {
    var overlay = null;
    var progressBar = null;
    var progressFill = null;
    
    function init() {
      if (!overlay) {
        overlay = document.createElement('div');
        overlay.className = 'loading-overlay';
        overlay.innerHTML = '<div><div class="spinner"></div><div class="loading-text">กำลังโหลด...</div></div>';
        document.body.appendChild(overlay);
      }
      
      if (!progressBar) {
        progressBar = document.createElement('div');
        progressBar.className = 'progress-bar';
        progressFill = document.createElement('div');
        progressFill.className = 'progress-bar-fill';
        progressBar.appendChild(progressFill);
        document.body.appendChild(progressBar);
      }
    }
    
    function show(text) {
      init();
      if (text) overlay.querySelector('.loading-text').textContent = text;
      overlay.classList.add('active');
    }
    
    function hide() {
      if (overlay) overlay.classList.remove('active');
    }
    
    function showProgress() {
      init();
      progressBar.classList.add('active');
      setProgress(0);
    }
    
    function setProgress(percent) {
      if (progressFill) progressFill.style.width = Math.min(100, Math.max(0, percent)) + '%';
    }
    
    function hideProgress() {
      if (progressBar) {
        setProgress(100);
        setTimeout(function() { progressBar.classList.remove('active'); }, 300);
      }
    }
    
    function simulateProgress(duration) {
      showProgress();
      var start = Date.now();
      var interval = setInterval(function() {
        var elapsed = Date.now() - start;
        var progress = Math.min(90, (elapsed / duration) * 100);
        setProgress(progress);
        if (elapsed >= duration) clearInterval(interval);
      }, 50);
      
      return function complete() {
        clearInterval(interval);
        setProgress(100);
        hideProgress();
      };
    }
    
    return { show: show, hide: hide, showProgress: showProgress, setProgress: setProgress, hideProgress: hideProgress, simulateProgress: simulateProgress };
  })();
  
  // Smooth transitions on page load
  document.addEventListener('DOMContentLoaded', function() {
    // Fade in cards
    var observer = new IntersectionObserver(function(entries) {
      entries.forEach(function(entry) {
        if (entry.isIntersecting) {
          entry.target.style.animation = 'fadeIn 0.5s ease-out';
          observer.unobserve(entry.target);
        }
      });
    }, { threshold: 0.1 });
    
    document.querySelectorAll('.card, .list-item').forEach(function(el) {
      observer.observe(el);
    });
    
    // Button press feedback
    document.addEventListener('click', function(e) {
      var button = e.target.closest('.btn, button');
      if (button && !button.disabled) {
        button.style.transform = 'scale(0.95)';
        setTimeout(function() { button.style.transform = ''; }, 150);
      }
    }, true);
  });
</script>
